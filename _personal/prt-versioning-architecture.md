# ğŸ”§ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ğ°Ñ ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ: Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¹ .prt

**ĞŸÑ€Ğ¾ĞµĞºÑ‚:** Engine Results Viewer  
**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ:** ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¹  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** Draft 1.0  
**Ğ”Ğ°Ñ‚Ğ°:** 3 Ğ½Ğ¾ÑĞ±Ñ€Ñ 2025  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** ğŸŸ¡ ĞĞ±ÑÑƒĞ¶Ğ´ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ğ¸

---

## ğŸ“‹ ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ñ€ĞµĞ·ÑĞ¼Ğµ

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** ĞšĞ¾Ğ³Ğ´Ğ° Ğ¸Ğ½Ğ¶ĞµĞ½ĞµÑ€ Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ¾Ğ² Ğ² EngMod4T, Ñ„Ğ°Ğ¹Ğ» .prt (snapshot ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°) Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ Ğ½Ğ¾Ğ²Ğ¾Ğ¼ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğµ. Ğ­Ñ‚Ğ¾ Ğ¿Ñ€Ğ¸Ğ²Ğ¾Ğ´Ğ¸Ñ‚ Ğº Ğ¿Ğ¾Ñ‚ĞµÑ€Ğµ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ - Ğ¸Ğ½Ğ¶ĞµĞ½ĞµÑ€ Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ğ½ÑÑ‚ÑŒ, Ñ‡Ñ‚Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ÑÑŒ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ â„–1 Ğ¸ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ â„–15.

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ .prt Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ¿Ğ¾ calculation marker. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ calculation marker ($baseline, $v2, $15 Ğ¸ Ñ‚.Ğ´.) Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ²Ğ¾Ğ¹ snapshot .prt. Ğ˜Ğ½Ğ¶ĞµĞ½ĞµÑ€ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ»ÑĞ±Ğ¾Ğ³Ğ¾ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ° Ğ¸ ÑÑ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ°Ğ¼Ğ¸.

**Ğ­Ñ„Ñ„ĞµĞºÑ‚:** 
- âœ… ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ audit trail ÑĞ²Ğ¾Ğ»ÑÑ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
- âœ… ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ğ½Ğ¾-ÑĞ»ĞµĞ´ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ²ÑĞ·ĞµĞ¹ (Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ» Ğ´Ğ»Ğ¸Ğ½Ñƒ header â†’ +5 HP)
- âœ… Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ "Ğ¾Ñ‚ĞºĞ°Ñ‚Ğ¸Ñ‚ÑŒÑÑ" Ğº ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¼ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸ÑĞ¼
- âœ… ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ (Ğ·Ğ°Ğ¼ĞµĞ½Ğ° Ñ€ÑƒÑ‡Ğ½Ñ‹Ñ… Excel Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†)

---

## ğŸ¯ ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹

### Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ workflow (EngMod4T)

```
Ğ¨Ğ°Ğ³ 1: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ´Ğ²Ğ¸Ğ³Ğ°Ñ‚ĞµĞ»Ñ
â”œâ”€â”€ Bore: 82.5mm, Stroke: 75.6mm
â”œâ”€â”€ Exhaust header: 650mm, diameter 39.4mm
â”œâ”€â”€ Intake: ITB system
â””â”€â”€ Combustion: timing 14.7Â° @ 2000 RPM

Ğ¨Ğ°Ğ³ 2: Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ° â†’ marker: $baseline
â”œâ”€â”€ EngMod4T Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ .prt Ñ„Ğ°Ğ¹Ğ» (snapshot ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸)
â””â”€â”€ EngMod4T Ğ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ² .det/.pou

Ğ¨Ğ°Ğ³ 3: Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²
â””â”€â”€ Exhaust header: 650mm â†’ 700mm

Ğ¨Ğ°Ğ³ 4: Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ° â†’ marker: $v2_longer_header
â”œâ”€â”€ EngMod4T ĞŸĞ•Ğ Ğ•Ğ—ĞĞŸĞ˜Ğ¡Ğ«Ğ’ĞĞ•Ğ¢ .prt Ñ„Ğ°Ğ¹Ğ» (Ğ½Ğ¾Ğ²Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ)
â””â”€â”€ EngMod4T Ğ”ĞĞ‘ĞĞ’Ğ›Ğ¯Ğ•Ğ¢ Ğ² .det/.pou (Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹)

âŒ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: .prt Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿Ğ¸ÑĞ°Ğ½ â†’ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ½Ğ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ $baseline
```

### Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ

Ğ˜Ğ½Ğ¶ĞµĞ½ĞµÑ€ Ğ²ĞµĞ´Ñ‘Ñ‚ Excel Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ:

| Marker | Description |
|--------|-------------|
| $baseline | Initial: header 650mm, timing 14.7Â° @ 2000 RPM |
| $v2_longer_header | Changed: header 650mm â†’ 700mm |
| $v15_final | Changed: header 700mm, timing 25.0Â° @ 6000 RPM |

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ°:**
- â° Ğ—Ğ°Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ²Ñ€ĞµĞ¼Ñ
- âŒ Ğ›ĞµĞ³ĞºĞ¾ Ğ·Ğ°Ğ±Ñ‹Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ
- ğŸ“ ĞĞµĞ¿Ğ¾Ğ»Ğ½Ñ‹Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ
- ğŸ” Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ¸Ñ

---

## ğŸ’¡ ĞŸÑ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµĞ¼Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ

### ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¹

**ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ:** ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑŒ Ğ²ĞµÑ€ÑĞ¸Ñ .prt Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ calculation marker

**Workflow Ğ² Engine Viewer:**

```
1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ² EngMod4T:
   $baseline â†’ EngMod4T ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ .prt
   
2. Engine Viewer Ğ¿Ğ°Ñ€ÑĞ¸Ñ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚:
   - ĞĞ±Ğ½Ğ°Ñ€ÑƒĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚ marker $baseline Ğ² .det
   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚, ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ»Ğ¸ .metadata/prt-versions/$baseline.prt
   - Ğ•ÑĞ»Ğ¸ ĞĞ•Ğ¢ â†’ ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµÑ‚ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ .prt â†’ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ ĞºĞ°Ğº $baseline.prt
   - Ğ•ÑĞ»Ğ¸ Ğ”Ğ â†’ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ (ÑƒĞ¶Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½)
   
3. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ÑĞµÑ‚ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ (header 650â†’700mm):
   EngMod4T ĞŸĞ•Ğ Ğ•Ğ—ĞĞŸĞ˜Ğ¡Ğ«Ğ’ĞĞ•Ğ¢ .prt
   
4. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚:
   $v2 â†’ EngMod4T Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ .prt
   
5. Engine Viewer Ğ¿Ğ°Ñ€ÑĞ¸Ñ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚:
   - ĞĞ±Ğ½Ğ°Ñ€ÑƒĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚ ĞĞĞ’Ğ«Ğ™ marker $v2 Ğ² .det
   - ĞšĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµÑ‚ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ .prt â†’ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ ĞºĞ°Ğº $v2.prt
   
6. Ğ§ĞµÑ€ĞµĞ· Ğ¼ĞµÑÑÑ† Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ñ…Ğ¾Ñ‡ĞµÑ‚ Ğ¿Ğ¾Ğ½ÑÑ‚ÑŒ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ñƒ:
   - Engine Viewer: "Compare $baseline vs $v2"
   - Diff Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚: Exhaust header: 650mm â†’ 700mm
```

---

## ğŸ“ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¹

```
C:/4Stroke/TM Soft ShortCut/
â”œâ”€â”€ TM Soft ShortCut.det             # Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ (Ğ²ÑĞµ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ñ‹)
â”œâ”€â”€ TM Soft ShortCut.pou             # Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ (Ğ²ÑĞµ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ñ‹)
â”œâ”€â”€ TM Soft ShortCut.prt             # Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ)
â”œâ”€â”€ TM Soft ShortCut.eng             # Engine file
â”œâ”€â”€ TM Soft ShortCut.exp             # Exhaust port
â”œâ”€â”€ TM Soft ShortCut.ipo             # Inlet port
â”œâ”€â”€ ... (Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²)
â””â”€â”€ .metadata/                       # ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Engine Viewer
    â”œâ”€â”€ project.json                 # ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° (ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ)
    â””â”€â”€ prt-versions/                # ĞĞĞ’ĞĞ•: Ğ’ĞµÑ€ÑĞ¸Ğ¸ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¹
        â”œâ”€â”€ $baseline.prt
        â”œâ”€â”€ $v2_longer_header.prt
        â”œâ”€â”€ $v15_final.prt
        â””â”€â”€ index.json               # ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ²ĞµÑ€ÑĞ¸Ğ¹
```

### Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ index.json

```json
{
  "$baseline": {
    "createdAt": "2025-10-21T10:30:00Z",
    "capturedFrom": "TM Soft ShortCut.prt",
    "fileSize": 12456,
    "checksum": "sha256:abc123..."
  },
  "$v2_longer_header": {
    "createdAt": "2025-10-22T14:15:00Z",
    "capturedFrom": "TM Soft ShortCut.prt",
    "fileSize": 12460,
    "checksum": "sha256:def456...",
    "changesFrom": "$baseline",
    "changesCount": 3
  }
}
```

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ .metadata/?**
- âœ… Ğ£Ğ¶Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ²
- âœ… Ğ¡ĞºÑ€Ñ‹Ñ‚Ğ°Ñ Ğ¿Ğ°Ğ¿ĞºĞ° - Ğ½Ğµ Ğ·Ğ°Ñ…Ğ»Ğ°Ğ¼Ğ»ÑĞµÑ‚ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
- âœ… Ğ’ÑÑ‘ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ¼ĞµÑÑ‚Ğµ
- âœ… ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ backup/sync
- âœ… Ğ¡Ğ¾Ğ³Ğ»Ğ°ÑÑƒĞµÑ‚ÑÑ Ñ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹

---

## âš™ï¸ Backend Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°

### Trigger: ĞšĞ¾Ğ³Ğ´Ğ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑŒ Ğ²ĞµÑ€ÑĞ¸Ñ?

**Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ:** Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğ¸ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ marker

**ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼:**

```
function versionPrtFiles(projectPath) {
  // 1. ĞŸĞ°Ñ€ÑĞ¸Ğ¼ .det/.pou, Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ²ÑĞµ calculation markers
  const calculations = parseDetFile(projectPath).calculations;
  const markers = calculations.map(calc => calc.id); // ["$baseline", "$v2", ...]
  
  // 2. Ğ§Ğ¸Ñ‚Ğ°ĞµĞ¼ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ .prt Ñ„Ğ°Ğ¹Ğ»
  const currentPrt = readFile(`${projectPath}/project.prt`);
  
  // 3. Ğ£Ğ±ĞµĞ¶Ğ´Ğ°ĞµĞ¼ÑÑ Ñ‡Ñ‚Ğ¾ .metadata/prt-versions/ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚
  const versionsDir = `${projectPath}/.metadata/prt-versions/`;
  ensureDirectoryExists(versionsDir);
  
  // 4. Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ¸Ğ»Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ index.json
  const index = loadIndex(versionsDir) || {};
  
  // 5. Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ marker Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ»Ğ¸ Ğ²ĞµÑ€ÑĞ¸Ñ
  for (marker of markers) {
    const versionPath = `${versionsDir}/${marker}.prt`;
    
    if (!fileExists(versionPath)) {
      // ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ñ€Ğ°Ğ· Ğ²Ğ¸Ğ´Ğ¸Ğ¼ ÑÑ‚Ğ¾Ñ‚ marker â†’ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ²ĞµÑ€ÑĞ¸Ñ
      copyFile(currentPrt, versionPath);
      
      // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ index
      index[marker] = {
        createdAt: new Date().toISOString(),
        capturedFrom: "project.prt",
        fileSize: getFileSize(currentPrt),
        checksum: calculateChecksum(currentPrt)
      };
      
      console.log(`âœ… Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ° Ğ²ĞµÑ€ÑĞ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ ${marker}`);
    }
  }
  
  // 6. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹ index
  saveIndex(versionsDir, index);
}
```

**ĞšĞ¾Ğ³Ğ´Ğ° Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑ‚ÑŒ:**
- ĞŸÑ€Ğ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° (Ñ„Ğ°Ğ·Ğ° Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°)
- ĞŸÑ€Ğ¸ file system watch (ĞµÑĞ»Ğ¸ .det Ğ¸Ğ·Ğ¼ĞµĞ½Ñ‘Ğ½)
- ĞšĞ½Ğ¾Ğ¿ĞºĞ° "ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²ĞµÑ€ÑĞ¸Ğ¸" Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ğ² UI

### API Endpoints

**ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ñ‹Ğµ Ğ½Ğ¾Ğ²Ñ‹Ğµ endpoints:**

```
GET /api/project/:id/prt-versions
â†’ Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½Ğ½Ñ‹Ñ… .prt Ğ²ĞµÑ€ÑĞ¸Ğ¹

GET /api/project/:id/prt-versions/:marker
â†’ Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½ÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ .prt (Ñ€Ğ°ÑĞ¿Ğ°Ñ€ÑĞµĞ½Ğ½ÑƒÑ)

GET /api/project/:id/prt-versions/compare/:marker1/:marker2
â†’ Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ diff Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ´Ğ²ÑƒĞ¼Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸

POST /api/project/:id/prt-versions/:marker/save
â†’ Ğ’Ñ€ÑƒÑ‡Ğ½ÑƒÑ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ .prt ĞºĞ°Ğº Ğ²ĞµÑ€ÑĞ¸Ñ Ğ´Ğ»Ñ marker
```

---

## ğŸ¨ UI/UX Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½

### 1. ĞĞ¾Ğ²Ğ°Ñ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ°: "Configuration History"

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:** ProjectPage, Ñ€ÑĞ´Ğ¾Ğ¼ Ñ Charts Ğ¸ Data Table

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Charts] [Data Table] [Configuration History]  â”‚ â† ĞĞĞ’ĞĞ¯ Ğ’ĞšĞ›ĞĞ”ĞšĞ!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ:**

```
Configuration History Ğ´Ğ»Ñ "TM Soft ShortCut"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ $baseline                                     â”‚
â”‚ ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ                           â”‚
â”‚ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ°: 21 Ğ¾ĞºÑ‚ 2025, 10:30                   â”‚
â”‚                                                  â”‚
â”‚ [ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸] [Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ Ñ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ $v2_longer_header                             â”‚
â”‚ 3 Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¾ Ğ¾Ñ‚ $baseline               â”‚
â”‚ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ°: 22 Ğ¾ĞºÑ‚ 2025, 14:15                   â”‚
â”‚                                                  â”‚
â”‚ [ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸] [Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ Ñ $baseline]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ $v15_final                                    â”‚
â”‚ 7 Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¾ Ğ¾Ñ‚ $baseline              â”‚
â”‚ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ°: 25 Ğ¾ĞºÑ‚ 2025, 16:45                   â”‚
â”‚                                                  â”‚
â”‚ [ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸] [Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ Ñ Ğ»ÑĞ±Ğ¾Ğ¹...]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Ğ ÑƒÑ‡Ğ½Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ]
[ğŸ”„ ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²ĞµÑ€ÑĞ¸Ğ¸] [ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰ÑƒÑ ĞºĞ°Ğº...]
```

### 2. Configuration Viewer Modal

**Trigger:** Click "View Configuration"

**Content:** Beautifully parsed .prt file

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Configuration: $baseline                        â”‚
â”‚                                           [âœ•]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ ENGINE                                          â”‚
â”‚ â€¢ Type: 4-cylinder Inline, Naturally Aspirated â”‚
â”‚ â€¢ Bore Ã— Stroke: 82.5 Ã— 75.6 mm                â”‚
â”‚ â€¢ Displacement: 1616 cc                         â”‚
â”‚ â€¢ Compression Ratio: 11.3:1                     â”‚
â”‚ â€¢ Cylinder Head: Tumble Flow, 4 valves/cyl     â”‚
â”‚                                                 â”‚
â”‚ INTAKE SYSTEM                                   â”‚
â”‚ â€¢ Type: Individual Throttle Bodies (ITB)       â”‚
â”‚ â€¢ Throttles: 4 Ã— Butterfly type                â”‚
â”‚ â€¢ Pipes: 8 total (4 cylinder + 4 throttle)     â”‚
â”‚                                                 â”‚
â”‚ EXHAUST SYSTEM                                  â”‚
â”‚ â€¢ Type: 4-into-1 collector                     â”‚
â”‚ â€¢ Header pipes: 4 Ã— 650mm, Ã˜ 39.4mm            â”‚
â”‚ â€¢ Collector: Ã˜ 78.8mm â†’ Ã˜ 57mm                 â”‚
â”‚ â€¢ Exhaust box: 9000 cc                         â”‚
â”‚                                                 â”‚
â”‚ COMBUSTION                                      â”‚
â”‚ â€¢ Fuel: 100 Unleaded                           â”‚
â”‚ â€¢ Timing: 14.7Â° @ 2000 RPM â†’ 29.4Â° @ 9000 RPM  â”‚
â”‚ â€¢ AFR: 12.57 @ 2000 RPM â†’ 12.42 @ 9000 RPM     â”‚
â”‚                                                 â”‚
â”‚ [Export as PDF] [Copy to Clipboard]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Configuration Diff Viewer

**Trigger:** Click "Compare with $baseline"

**Content:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Comparing: $v2_longer_header vs $baseline      â”‚
â”‚                                           [âœ•]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ EXHAUST SYSTEM                                  â”‚
â”‚ â— Header length: 650mm â†’ 700mm                  â”‚
â”‚ â—‹ Header diameter: 39.4mm (unchanged)          â”‚
â”‚ â—‹ Collector: 78.8mm â†’ 57mm (unchanged)         â”‚
â”‚                                                 â”‚
â”‚ COMBUSTION                                      â”‚
â”‚ â— Timing @ 6000 RPM: 23.5Â° â†’ 25.0Â°             â”‚
â”‚ â— AFR @ 6000 RPM: 12.50 â†’ 12.45                â”‚
â”‚ â—‹ Timing @ 2000 RPM: 14.7Â° (unchanged)         â”‚
â”‚                                                 â”‚
â”‚ UNCHANGED SECTIONS                              â”‚
â”‚ â—‹ Engine (bore, stroke, CR, cylinders)         â”‚
â”‚ â—‹ Intake system (ITB configuration)            â”‚
â”‚ â—‹ Firing order                                 â”‚
â”‚                                                 â”‚
â”‚ Legend:                                         â”‚
â”‚ â— Changed  â—‹ Unchanged                          â”‚
â”‚                                                 â”‚
â”‚ [Export Diff Report] [Apply to Current]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Diff Algorithm Priorities:**

**Critical changes (always show):**
- âœ… Exhaust system (lengths, diameters, collector)
- âœ… Intake system (ITB vs IM, pipe dimensions)
- âœ… Combustion (timing, AFR by RPM)
- âœ… Engine basics (bore, stroke, CR)

**Secondary changes (show if changed):**
- âš ï¸ Valve timing (cam centers)
- âš ï¸ Flowbench data
- âš ï¸ Port dimensions

**Ignore (don't show unless requested):**
- â—‹ Wall temperatures
- â—‹ Atmospheric conditions
- â—‹ Iteration cycles

---

## ğŸš€ Implementation Phases

### Phase 1: Backend Foundation (4-6 hours)
- [ ] Create .prt parser (similar to .det/.pou parsers)
- [ ] Implement versioning logic in fileScanner.js
- [ ] Create prt-versions/ directory structure
- [ ] Implement index.json management
- [ ] Add API endpoints for version retrieval
- [ ] Test with real .prt files

**Deliverable:** Backend can automatically version .prt files by marker

### Phase 2: Basic UI (3-4 hours)
- [ ] Add "Configuration History" tab to ProjectPage
- [ ] Display list of saved versions
- [ ] Show basic metadata (date, changes count)
- [ ] Link to calculation results (click â†’ view charts)

**Deliverable:** User can see list of configuration versions

### Phase 3: Configuration Viewer (4-5 hours)
- [ ] Create Configuration Viewer modal
- [ ] Parse and display .prt beautifully
- [ ] Organize by sections (Engine, Intake, Exhaust, Combustion)
- [ ] Add export to PDF/text

**Deliverable:** User can view detailed configuration for any calculation

### Phase 4: Diff Viewer (5-7 hours)
- [ ] Implement .prt diff algorithm
- [ ] Create Diff Viewer modal
- [ ] Highlight changed/unchanged parameters
- [ ] Categorize changes by priority
- [ ] Add "Apply to current" feature (optional)

**Deliverable:** User can compare configurations and understand changes

### Phase 5: Advanced Features (optional)
- [ ] Manual "Save configuration" button
- [ ] Configuration search/filter
- [ ] Timeline visualization
- [ ] Export full configuration history report

**Total Estimate:** 16-22 hours (2-3 days)

---

## ğŸ” Critical Questions for Discussion

### 1. Storage Location
**Current proposal:** `.metadata/prt-versions/`

**Alternatives:**
- Option A: `.metadata/prt-versions/` (âœ… recommended)
- Option B: Separate database in Engine Viewer app folder
- Option C: In project root (visible to user)

**Question:** Is `.metadata/prt-versions/` acceptable?

---

### 2. Trigger Strategy
**Current proposal:** Save version on first detection of new marker

**Alternatives:**
- Option A: On first detection (âœ… automatic)
- Option B: Manual "Save" button for each calculation
- Option C: On .prt file modification (file watcher)

**Question:** Is automatic on first detection correct?

**Edge case:** What if user runs $test, deletes it, then runs $test again with different config?
- Current: Version won't update (first $test already saved)
- Solution: Manual "Re-save" button in UI

---

### 3. UI Priority
**Options:**
1. **Full implementation** (History + Viewer + Diff) - 16-22 hours
2. **Minimal version** (History + basic Viewer) - 7-10 hours
3. **Backend first** (versioning only, no UI) - 4-6 hours

**Question:** What's the priority? Can we start with backend + minimal UI?

---

### 4. Diff Algorithm Scope
**Question:** Which changes are CRITICAL to highlight?

**Current proposal:**
- âœ… Always show: Exhaust (lengths, diameters), Intake (type, ITB/IM), Combustion (timing, AFR), Engine (bore, stroke, CR)
- âš ï¸ Show if changed: Valve timing, flowbench, ports
- â—‹ Hide by default: Temperatures, atmospheric, iterations

**Is this correct?** Any other critical parameters?

---

### 5. Integration with Existing Features
**Question:** How should Configuration History integrate with charts?

**Ideas:**
- A: Click configuration â†’ automatically load that calculation in charts
- B: Show "View results" button â†’ opens calculation
- C: Side-by-side: configuration + results in split view

**Preference?**

---

### 6. Other File Types
**Current scope:** Only .prt versioning

**Question:** Should we version other files?
- `.eng` (engine configuration)
- `.exp` (exhaust port + cam)
- `.ipo` (inlet port + cam)
- `.cbd` (combustion data)

**Or is .prt sufficient** (since it contains summary of all)?

---

## ğŸ“Š Success Metrics

**Qualitative:**
- âœ… Engineer can understand what changed between any two calculations
- âœ… No more manual Excel tables needed
- âœ… Complete audit trail of project evolution
- âœ… Can "rollback" to successful configurations

**Quantitative:**
- â±ï¸ Time saved: ~5-10 minutes per calculation (no manual logging)
- ğŸ“ˆ With 50 calculations/project â†’ save ~4-8 hours of documentation time
- ğŸ¯ 100% accurate configuration tracking (vs ~70% with manual approach)

---

## ğŸ¯ Next Steps

**For this discussion:**
1. Review architecture proposal
2. Answer critical questions (1-6 above)
3. Prioritize features (full vs minimal implementation)
4. Approve storage structure
5. Approve UI mockups

**After approval:**
1. Create technical roadmap for Claude Code
2. Create ADR (Architecture Decision Record)
3. Update documentation
4. Begin implementation

---

## ğŸ“ Notes & Ideas

*(Space for collaborative notes during discussion)*

**Vladimir's feedback:**
- 

**Additional ideas:**
- 

**Concerns:**
- 

**Decisions made:**
- 

---

**Document Status:** ğŸŸ¡ Draft - awaiting review and feedback  
**Next Review:** After Vladimir's feedback  
**Implementation Start:** After approval
