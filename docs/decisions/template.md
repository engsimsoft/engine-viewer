# ADR XXX: Название Решения

**Дата:** YYYY-MM-DD
**Статус:** [Предложено / Принято / Отклонено / Устарело]
**Автор:** [Вы / Claude Code]

---

## Контекст

Опишите проблему или вопрос который требует решения.

**Пример:**
> Нужно выбрать библиотеку для построения графиков. Требования:
> - Поддержка 2500+ точек данных без тормозов
> - Zoom и Pan для детального изучения
> - Несколько графиков на одной странице
> - Dual Y-axes (две оси Y)

---

## Решение

Что решили сделать (коротко и ясно).

**Пример:**
> Использовать **ECharts v5.5+** для отображения всех графиков в приложении.

---

## Причины

Почему выбрали именно это решение (аргументы):

1. **Производительность**:
   - ECharts оптимизирован для больших datasets (протестировано на 2500+ точек)
   - Canvas rendering вместо SVG → быстрее при большом количестве данных

2. **Функционал "из коробки"**:
   - dataZoom (zoom/pan) встроен
   - Dual Y-axes нативная поддержка
   - Tooltips и легенды настраиваются

3. **React интеграция**:
   - Официальный wrapper `echarts-for-react`
   - Полная типизация TypeScript
   - Reactive updates через props

4. **Документация**:
   - Подробная документация на английском
   - Множество примеров и CodePen демо
   - Активное сообщество

---

## Последствия

### Плюсы (что получаем):
- ✅ Высокая производительность даже на 2500+ точках
- ✅ Богатый функционал без написания кода с нуля
- ✅ Профессиональный вид графиков
- ✅ Адаптивность (responsive charts)
- ✅ Экспорт в PNG/SVG "из коробки"

### Минусы (что теряем / с чем придётся мириться):
- ⚠️ Больший bundle size (~300KB минимум)
- ⚠️ Требуется изучение API (кривая обучения)
- ⚠️ Зависимость от внешней библиотеки

---

## Альтернативы

### Chart.js
- **Плюсы**: Простой API, меньший bundle size
- **Минусы**: Хуже производительность на больших данных, нет Dual Y-axes "из коробки"
- **Вердикт**: Отклонено из-за производительности

### Plotly.js
- **Плюсы**: Научные графики, 3D поддержка
- **Минусы**: Слишком тяжёлый bundle (1.5MB+), избыточный функционал
- **Вердикт**: Отклонено из-за bundle size

### Recharts
- **Плюсы**: React-native, композабельный API
- **Минусы**: SVG rendering → медленнее на больших данных
- **Вердикт**: Отклонено из-за производительности

### D3.js (кастомное решение)
- **Плюсы**: Полный контроль, гибкость
- **Минусы**: Огромные трудозатраты на разработку (2-3 недели), поддержка
- **Вердикт**: Отклонено из-за time-to-market

---

## Реализация

Где посмотреть реализацию:

- **Компоненты**: [frontend/src/components/visualization/ChartPreset1.tsx](../../frontend/src/components/visualization/ChartPreset1.tsx)
- **Конфигурация**: [frontend/src/lib/chartConfig.ts](../../frontend/src/lib/chartConfig.ts)
- **Зависимости**: `echarts ^5.5.0`, `echarts-for-react ^3.0.2`

---

## Ссылки

- [ECharts Documentation](https://echarts.apache.org/en/index.html)
- [echarts-for-react GitHub](https://github.com/hustcc/echarts-for-react)
- [Официальные примеры](https://echarts.apache.org/examples/en/index.html)
- [Roadmap задача](../../roadmap.md) (Этап 7: Пресеты графиков)

---

## Примечания

Дополнительные заметки (опционально):

- В будущем можем добавить Plotly для 3D графиков (если потребуется)
- Bundle size не критичен т.к. приложение SPA для desktop
- Если производительность упадёт - есть опция `lazyUpdate: true`
