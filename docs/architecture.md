# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

**–î–∞—Ç–∞:** 21 –æ–∫—Ç—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è:** 1.0

---

## –û–±—â–∞—è —Å—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         USER (Browser)                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚îÇ HTTP requests
                            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    FRONTEND (React + Vite)                       ‚îÇ
‚îÇ                   http://localhost:5173                          ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ   HomePage   ‚îÇ   ‚îÇ ProjectPage  ‚îÇ   ‚îÇ  Components  ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ   ‚îÇ              ‚îÇ   ‚îÇ              ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ - List       ‚îÇ   ‚îÇ - Charts     ‚îÇ   ‚îÇ - Chart      ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ   projects   ‚îÇ   ‚îÇ - Selector   ‚îÇ   ‚îÇ - Table      ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ   ‚îÇ - Table      ‚îÇ   ‚îÇ - Cards      ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ         ‚îÇ                  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ
‚îÇ                                               ‚îÇ                 ‚îÇ
‚îÇ                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ                        ‚îÇ     API Client (axios)       ‚îÇ         ‚îÇ
‚îÇ                        ‚îÇ  - getProjects()             ‚îÇ         ‚îÇ
‚îÇ                        ‚îÇ  - getProject(id)            ‚îÇ         ‚îÇ
‚îÇ                        ‚îÇ  - getConfig()               ‚îÇ         ‚îÇ
‚îÇ                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                         ‚îÇ
                                         ‚îÇ /api/* requests
                                         ‚îÇ (Vite proxy)
                                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   BACKEND (Node.js + Express)                    ‚îÇ
‚îÇ                   http://localhost:3000                          ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ                   Express Server                      ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  - CORS middleware                                    ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  - JSON parsing                                       ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  - Error handling                                     ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                             ‚îÇ                                    ‚îÇ
‚îÇ          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ          ‚îÇ                  ‚îÇ                  ‚îÇ               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ  GET /health   ‚îÇ ‚îÇ GET /api/   ‚îÇ  ‚îÇ GET /api/      ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ                ‚îÇ ‚îÇ  projects   ‚îÇ  ‚îÇ  project/:id   ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                            ‚îÇ                  ‚îÇ               ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ                    ‚îÇ      Services Layer               ‚îÇ      ‚îÇ
‚îÇ                    ‚îÇ  - fileScanner.js                 ‚îÇ      ‚îÇ
‚îÇ                    ‚îÇ  - fileParser.js                  ‚îÇ      ‚îÇ
‚îÇ                    ‚îÇ  - config.js                      ‚îÇ      ‚îÇ
‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                            ‚îÇ                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚îÇ Read files
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      FILE SYSTEM                                 ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îÇ
‚îÇ  ‚îÇ config.yaml  ‚îÇ        ‚îÇ  test-data/  ‚îÇ                      ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ        ‚îÇ              ‚îÇ                      ‚îÇ
‚îÇ  ‚îÇ - Settings   ‚îÇ        ‚îÇ - *.det      ‚îÇ                      ‚îÇ
‚îÇ  ‚îÇ - Colors     ‚îÇ        ‚îÇ   files      ‚îÇ                      ‚îÇ
‚îÇ  ‚îÇ - Paths      ‚îÇ        ‚îÇ              ‚îÇ                      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### 1. Separation of Concerns (–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏)

**Backend:**
- **Routes** - —Ç–æ–ª—å–∫–æ HTTP –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- **Services** - –≤—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **Config** - –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**Frontend:**
- **Pages** - –∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü
- **Components** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã
- **Hooks** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ state management
- **API** - HTTP –∫–ª–∏–µ–Ω—Ç, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 2. Single Responsibility (–û–¥–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å)

–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –¥–µ–ª–∞–µ—Ç –û–î–ù–£ –≤–µ—â—å:
- `fileParser.js` - –¢–û–õ–¨–ö–û –ø–∞—Ä—Å–∏–Ω–≥ .det —Ñ–∞–π–ª–æ–≤
- `fileScanner.js` - –¢–û–õ–¨–ö–û —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏
- `ChartComponent` - –¢–û–õ–¨–ö–û –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞

### 3. DRY (Don't Repeat Yourself)

- –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `components/`
- Custom hooks –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ª–æ–≥–∏–∫–∏
- –£—Ç–∏–ª–∏—Ç—ã –≤ `utils/`

### 4. Layered Architecture (–°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

```
Presentation Layer (UI)
         ‚Üì
Business Logic Layer (Services, Hooks)
         ‚Üì
Data Access Layer (API, File System)
```

---

## Backend –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–ª–æ–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      PRESENTATION LAYER                 ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ      Express Routes              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - routes/projects.js            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - routes/data.js                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - routes/config.js              ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚îÇ Call services
                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      BUSINESS LOGIC LAYER               ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ         Services                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - fileScanner.scanFolder()      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - fileParser.parse()            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - config.load()                 ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚îÇ Read/Write
                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      DATA ACCESS LAYER                  ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ      File System                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - test-data/*.det               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - config.yaml                   ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ú–æ–¥—É–ª–∏

**server.js** - Express —Å–µ—Ä–≤–µ—Ä
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Express
- Middleware (CORS, JSON parsing)
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ routes
- Error handling
- –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

**config.js** - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ß—Ç–µ–Ω–∏–µ config.yaml
- –ü–∞—Ä—Å–∏–Ω–≥ YAML ‚Üí JavaScript –æ–±—ä–µ–∫—Ç
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –≠–∫—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫

**fileScanner.js** - –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏ test-data/
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é (.det)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–¥–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Ä–∞–∑–º–µ—Ä)
- –í–æ–∑–≤—Ä–∞—Ç —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤

**fileParser.js** - –ü–∞—Ä—Å–∏–Ω–≥ .det —Ñ–∞–π–ª–æ–≤
- –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
- –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–æ–∫–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (—Ç–∏–ø –¥–≤–∏–≥–∞—Ç–µ–ª—è, —Ü–∏–ª–∏–Ω–¥—Ä—ã)
- –ü–∞—Ä—Å–∏–Ω–≥ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–æ–ª–æ–Ω–æ–∫
- **‚ö†Ô∏è –£—á—ë—Ç —Å–ª—É–∂–µ–±–Ω–æ–π –ø–µ—Ä–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏!**
- –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å—á—ë—Ç–æ–≤ (–º–∞—Ä–∫–µ—Ä—ã $1, $2, ...)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –í–æ–∑–≤—Ä–∞—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ JSON

**routes/projects.js** - API –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
- GET /api/projects
- –í—ã–∑–æ–≤ fileScanner
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞

**routes/data.js** - API –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞
- GET /api/project/:id
- –í—ã–∑–æ–≤ fileParser
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞

**routes/config.js** - API –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- GET /api/config - –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- POST /api/config - –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

---

## Frontend –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–ª–æ–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      PRESENTATION LAYER                 ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ          Pages                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - HomePage.tsx                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - ProjectPage.tsx               ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                 ‚îÇ                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ        Components                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - ProjectCard.tsx               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - ChartPreset1.tsx              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - DataTable.tsx                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - CalculationSelector.tsx       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚îÇ Use hooks
                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      BUSINESS LOGIC LAYER               ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ        Custom Hooks              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - useProjects()                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - useProjectData(id)            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - useSelectedCalculations()     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - useChartPreset()              ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                 ‚îÇ                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ          Utils                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - formatDate()                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - exportToCSV()                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - exportToPNG()                 ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚îÇ HTTP requests
                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      DATA ACCESS LAYER                  ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ        API Client                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - api/client.ts                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - getProjects()                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - getProject(id)                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - getConfig()                   ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ú–æ–¥—É–ª–∏

**App.tsx** - –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- React Router setup
- Routes (/, /:projectId)
- Layout

**pages/HomePage.tsx** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ useProjects() hook
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π (loading, error, empty)

**pages/ProjectPage.tsx** - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞
- –°–µ–ª–µ–∫—Ç–æ—Ä —Ä–∞—Å—á—ë—Ç–æ–≤
- –ü—Ä–µ—Å–µ—Ç—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤
- –¢–∞–±–ª–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö

**components/** - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `ProjectCard` - –∫–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `MetadataDialog` - –¥–∏–∞–ª–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- `TagInput` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–∞–º–∏
- `LoadingSpinner` - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
- `ErrorMessage` - —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- `EmptyState` - –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **Visualization components:**
  - `CalculationSelector` - –≤—ã–±–æ—Ä —Ä–∞—Å—á—ë—Ç–æ–≤ (–º–∞–∫—Å 5) —Å checkbox –∏ —Ü–≤–µ—Ç–Ω—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
  - `ChartPreset1` - –≥—Ä–∞—Ñ–∏–∫ "–ú–æ—â–Ω–æ—Å—Ç—å –∏ –º–æ–º–µ–Ω—Ç" (dual Y-axes) ‚úÖ
  - `ChartPreset2` - –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
  - `ChartPreset3` - –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
  - `ChartPreset4` - –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
  - `DataTable` - —Ç–∞–±–ª–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

**hooks/** - Custom hooks
- `useProjects` - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ ‚úÖ
- `useProjectData` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ ID (—Å race condition handling) ‚úÖ
- `useSelectedCalculations` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ —Ä–∞—Å—á—ë—Ç–∞–º–∏ (–º–∞–∫—Å 5) ‚úÖ
- `useChartPreset` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–∞–º–∏ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

**api/client.ts** - API –∫–ª–∏–µ–Ω—Ç
- Axios instance
- HTTP –º–µ—Ç–æ–¥—ã (GET, POST)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –¢–∏–ø–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤

**types/** - TypeScript —Ç–∏–ø—ã
- `EngineMetadata` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–≤–∏–≥–∞—Ç–µ–ª—è
- `DataPoint` - —Ç–æ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- `Calculation` - —Ä–∞—Å—á—ë—Ç
- `ProjectData` - –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞
- UI —Ç–∏–ø—ã

**utils/** - –£—Ç–∏–ª–∏—Ç—ã
- `formatDate` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç
- `exportToCSV` - —ç–∫—Å–ø–æ—Ä—Ç –≤ CSV
- `exportToExcel` - —ç–∫—Å–ø–æ—Ä—Ç –≤ Excel
- `exportToPNG` - —ç–∫—Å–ø–æ—Ä—Ç –≥—Ä–∞—Ñ–∏–∫–∞ –≤ PNG

---

## –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### GET /api/projects

```
User clicks on HomePage
         ‚Üì
HomePage.tsx calls useProjects()
         ‚Üì
useProjects() calls api.getProjects()
         ‚Üì
api.getProjects() ‚Üí GET /api/projects
         ‚Üì
Backend routes/projects.js
         ‚Üì
fileScanner.scanFolder()
         ‚Üì
Read test-data/ folder
         ‚Üì
Return list of .det files
         ‚Üì
Response: [{id, name, date, calculations}, ...]
         ‚Üì
useProjects() updates state
         ‚Üì
HomePage.tsx re-renders with data
```

### GET /api/project/:id

```
User clicks "–û—Ç–∫—Ä—ã—Ç—å" on ProjectCard
         ‚Üì
Navigate to /project/:id
         ‚Üì
ProjectPage.tsx calls useProjectData(id)
         ‚Üì
useProjectData() calls api.getProject(id)
         ‚Üì
api.getProject(id) ‚Üí GET /api/project/:id
         ‚Üì
Backend routes/data.js
         ‚Üì
fileParser.parse(filename)
         ‚Üì
Read test-data/Vesta 1.6 IM.det
         ‚Üì
Parse file:
  - Line 1: metadata (cylinders, type)
  - Line 2: column names
  - Line 3+: calculations ($1, $2) and data
         ‚Üì
Return ProjectData JSON
         ‚Üì
Response: {project_name, engine, parameters, calculations}
         ‚Üì
useProjectData() updates state
         ‚Üì
ProjectPage.tsx re-renders with data
         ‚Üì
Charts display data
```

---

## –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

### ProjectData (JSON)

```typescript
interface ProjectData {
  project_name: string;           // "Vesta 1.6 IM"
  file_path: string;              // "test-data/Vesta 1.6 IM.det"
  modified_date: string;          // ISO 8601 date
  engine: {
    type: string;                 // "NATUR"
    cylinders: number;            // 4
  };
  parameters: string[];           // ["RPM", "P-Av", "Torque", ...]
  calculations: Calculation[];    // [...]
}

interface Calculation {
  id: string;                     // "$1", "$2", "$3"
  name: string;                   // "$1", "$2", "$3"
  data: DataPoint[];              // [...]
}

interface DataPoint {
  RPM: number;
  "P-Av": number;
  Torque: number;
  "PurCyl( 1)": number;
  // ... –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
}
```

---

## Metadata System (Project Metadata v1.0) üîß

**Status:** ‚úÖ Implemented (Phase 1 complete, Nov 2025)

**Purpose:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–≤–∏–≥–∞—Ç–µ–ª—è –∏–∑ `.prt` —Ñ–∞–π–ª–æ–≤ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ read-only (auto) –∏ user-editable (manual) —Å–µ–∫—Ü–∏–∏.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Metadata System

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    FILE SYSTEM (.prt files)                      ‚îÇ
‚îÇ  test-data/                                                      ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ BMW M42/BMW M42.prt                                       ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ 4_Cyl_ITB/4_Cyl_ITB.prt                                   ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ Vesta 1.6 IM/Vesta 1.6 IM.prt                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚îÇ Parse .prt files
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    PRT PARSER                                    ‚îÇ
‚îÇ  backend/src/parsers/formats/prtParser.js                        ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  Extract:                                                        ‚îÇ
‚îÇ  - Engine specs (cylinders, bore, stroke, CR, maxRPM)           ‚îÇ
‚îÇ  - Type detection (NA/Turbo/Supercharged)                       ‚îÇ
‚îÇ  - Intake system (ITB vs IM)                                    ‚îÇ
‚îÇ  - Exhaust pattern (4-2-1, 4-1, tri-y, etc.)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚îÇ Auto metadata
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  METADATA SERVICE                                ‚îÇ
‚îÇ  backend/src/services/metadataService.js                         ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  updateAutoMetadata(projectId, autoData)                        ‚îÇ
‚îÇ  - Reads existing .metadata/{id}.json                            ‚îÇ
‚îÇ  - Updates "auto" section ONLY                                  ‚îÇ
‚îÇ  - Preserves "manual" section                                   ‚îÇ
‚îÇ  - Saves merged metadata                                         ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  updateManualMetadata(projectId, manualData)                    ‚îÇ
‚îÇ  - Reads existing .metadata/{id}.json                            ‚îÇ
‚îÇ  - Updates "manual" section ONLY                                ‚îÇ
‚îÇ  - Preserves "auto" section                                     ‚îÇ
‚îÇ  - Saves merged metadata                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚îÇ Save to disk
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              METADATA STORAGE (.metadata/*.json)                 ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  .metadata/bmw-m42.json:                                         ‚îÇ
‚îÇ  {                                                               ‚îÇ
‚îÇ    "version": "1.0",                                             ‚îÇ
‚îÇ    "id": "bmw-m42",                                              ‚îÇ
‚îÇ    "displayName": "BMW M42",                                     ‚îÇ
‚îÇ    "auto": {                                                     ‚îÇ
‚îÇ      "cylinders": 4,                                             ‚îÇ
‚îÇ      "type": "NA",                                               ‚îÇ
‚îÇ      "configuration": "inline",                                  ‚îÇ
‚îÇ      "intakeSystem": "ITB",                                      ‚îÇ
‚îÇ      "exhaustSystem": "4-2-1"                                    ‚îÇ
‚îÇ    },                                                            ‚îÇ
‚îÇ    "manual": {                                                   ‚îÇ
‚îÇ      "client": "Ivan Petrov",                                    ‚îÇ
‚îÇ      "tags": ["track-build"],                                    ‚îÇ
‚îÇ      "notes": "Dyno tested"                                      ‚îÇ
‚îÇ    }                                                             ‚îÇ
‚îÇ  }                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Metadata Structure v1.0

**TypeScript Interface:**
```typescript
export interface AutoMetadata {
  cylinders: number;                    // From .prt: number of cylinders
  type: 'NA' | 'Turbo' | 'Supercharged'; // Engine type
  configuration: EngineConfiguration;   // inline, V, boxer, etc.
  bore: number;                         // Bore (mm)
  stroke: number;                       // Stroke (mm)
  compressionRatio: number;             // Compression ratio
  maxPowerRPM: number;                  // Max power RPM
  intakeSystem: IntakeSystem;           // ITB or IM
  exhaustSystem: ExhaustSystem;         // 4-2-1, 4-1, tri-y, etc.
}

export interface ManualMetadata {
  description?: string;     // User description
  client?: string;          // Client name
  tags?: string[];          // User tags
  status?: ProjectStatus;   // active, completed, archived
  notes?: string;           // User notes
  color?: string;           // Project color (hex)
}

export interface ProjectMetadata {
  version: '1.0';
  id: string;
  displayName?: string;
  auto?: AutoMetadata;      // Read-only (from .prt)
  manual: ManualMetadata;   // User-editable
  created: string;          // ISO 8601
  modified: string;         // ISO 8601
}
```

### .prt Parser Implementation

**File:** `backend/src/parsers/formats/prtParser.js`

**Parsing Logic:**

1. **Engine Specs Extraction:**
   ```javascript
   // Line 1: Header with engine name
   // Line 2-10: Engine specifications
   // Line ~50: "Maximum power obtained at _____ rpm" ‚Üí maxPowerRPM
   // Line ~100: Bore, stroke, compression ratio
   ```

2. **Intake System Detection:**
   ```javascript
   // Line 276: "N throttles - with no airboxes" ‚Üí ITB
   // Line 276: "N throttle - with a common airbox or plenum" ‚Üí IM

   if (line.includes('with no airboxes')) {
     intakeSystem = 'ITB';
   } else if (line.includes('with a common airbox or plenum')) {
     intakeSystem = 'IM';
   }
   ```

3. **Exhaust System Parsing:**
   ```javascript
   // Regex patterns for exhaust configuration
   // "4into2into1 manifold" ‚Üí "4-2-1"
   // "4into1 manifold" ‚Üí "4-1"
   // "tri-y manifold" ‚Üí "tri-y"

   const patterns = [
     { regex: /(\d+)into(\d+)into(\d+)/i, format: '$1-$2-$3' },
     { regex: /(\d+)into(\d+)/i, format: '$1-$2' },
     { regex: /tri-y/i, format: 'tri-y' }
   ];
   ```

4. **Type Detection:**
   ```javascript
   // Based on turbocharger/supercharger count
   if (turbochargers > 0) {
     engineType = 'Turbo';
   } else if (superchargers > 0) {
     engineType = 'Supercharged';
   } else {
     engineType = 'NA';
   }
   ```

**Registry Integration:**
```javascript
// backend/src/parsers/index.js
import { PrtParser } from './formats/prtParser.js';
import { globalRegistry } from './registry/FormatRegistry.js';

globalRegistry.register('prt', PrtParser);
```

### Metadata Service

**File:** `backend/src/services/metadataService.js`

**Key Functions:**

```javascript
/**
 * Update auto metadata (from .prt parser)
 * - Preserves manual section
 * - Overwrites auto section
 */
export async function updateAutoMetadata(projectId, autoData) {
  const metadataPath = `.metadata/${projectId}.json`;

  // Read existing metadata
  let metadata = await readMetadata(projectId);

  // Update auto section only
  metadata.auto = autoData;
  metadata.modified = new Date().toISOString();

  // Save (preserves manual section)
  await fs.writeFile(metadataPath, JSON.stringify(metadata, null, 2));
}

/**
 * Update manual metadata (from user)
 * - Preserves auto section
 * - Overwrites manual section
 */
export async function updateManualMetadata(projectId, manualData) {
  const metadataPath = `.metadata/${projectId}.json`;

  // Read existing metadata
  let metadata = await readMetadata(projectId);

  // Update manual section only
  metadata.manual = { ...metadata.manual, ...manualData };
  metadata.modified = new Date().toISOString();

  // Save (preserves auto section)
  await fs.writeFile(metadataPath, JSON.stringify(metadata, null, 2));
}
```

### File Scanner Integration

**File:** `backend/src/services/fileScanner.js`

**Recursive Directory Scanning:**
```javascript
async function scanDirectory(dirPath) {
  const projects = [];

  for (const entry of await fs.readdir(dirPath, { withFileTypes: true })) {
    if (entry.isDirectory()) {
      // Recursively scan subdirectories
      const subProjects = await scanDirectory(path.join(dirPath, entry.name));
      projects.push(...subProjects);
    } else if (entry.isFile()) {
      // Check if .det or .pou file
      if (entry.name.endsWith('.det') || entry.name.endsWith('.pou')) {
        // Check for corresponding .prt file
        const prtPath = entry.name.replace(/\.(det|pou)$/, '.prt');
        const prtFullPath = path.join(dirPath, prtPath);

        if (await fileExists(prtFullPath)) {
          // Parse .prt for auto metadata
          const autoMetadata = await prtParser.parse(prtFullPath);

          // Update auto metadata (preserves manual)
          await metadataService.updateAutoMetadata(projectId, autoMetadata);
        }

        projects.push({
          id: projectId,
          name: entry.name,
          path: path.join(dirPath, entry.name),
          metadata: await metadataService.readMetadata(projectId)
        });
      }
    }
  }

  return projects;
}
```

**New Directory Structure Support:**
```
test-data/
  ‚îú‚îÄ‚îÄ BMW M42/
  ‚îÇ   ‚îú‚îÄ‚îÄ BMW M42.det
  ‚îÇ   ‚îú‚îÄ‚îÄ BMW M42.pou
  ‚îÇ   ‚îî‚îÄ‚îÄ BMW M42.prt          ‚Üê Auto metadata source
  ‚îú‚îÄ‚îÄ 4_Cyl_ITB/
  ‚îÇ   ‚îú‚îÄ‚îÄ 4_Cyl_ITB.det
  ‚îÇ   ‚îú‚îÄ‚îÄ 4_Cyl_ITB.pou
  ‚îÇ   ‚îî‚îÄ‚îÄ 4_Cyl_ITB.prt
  ‚îî‚îÄ‚îÄ .metadata/
      ‚îú‚îÄ‚îÄ bmw-m42.json         ‚Üê Combined auto + manual
      ‚îî‚îÄ‚îÄ 4-cyl-itb.json
```

### API Updates

**GET /api/projects** - List projects with filters

```javascript
// routes/projects.js
router.get('/api/projects', async (req, res) => {
  const { cylinders, type, intake, exhaust } = req.query;

  // Scan all projects
  const projects = await fileScanner.scanFolder('./test-data');

  // Apply filters on metadata.auto.*
  let filtered = projects;

  if (cylinders) {
    filtered = filtered.filter(p => p.metadata?.auto?.cylinders === parseInt(cylinders));
  }

  if (type) {
    filtered = filtered.filter(p => p.metadata?.auto?.type === type);
  }

  if (intake) {
    filtered = filtered.filter(p => p.metadata?.auto?.intakeSystem === intake);
  }

  if (exhaust) {
    filtered = filtered.filter(p => p.metadata?.auto?.exhaustSystem === exhaust);
  }

  res.json(filtered);
});
```

**POST /api/projects/:id/metadata** - Update manual metadata only

```javascript
// routes/metadata.js
router.post('/api/projects/:id/metadata', async (req, res) => {
  const { id } = req.params;
  const manualData = req.body;

  // Update ONLY manual section (preserves auto)
  await metadataService.updateManualMetadata(id, manualData);

  res.json({ success: true });
});
```

### Data Flow: Metadata Population

```
1. User adds new .det + .prt files to test-data/

2. Backend scans test-data/ (recursive)
   ‚Üì
   fileScanner.scanFolder()

3. For each .det file found, check for .prt sibling
   ‚Üì
   const prtPath = detPath.replace('.det', '.prt')

4. If .prt exists, parse it
   ‚Üì
   prtParser.parse(prtPath)

5. Extract auto metadata from .prt
   ‚Üì
   { cylinders, type, intake, exhaust, ... }

6. Update auto metadata in .metadata/{id}.json
   ‚Üì
   metadataService.updateAutoMetadata(id, autoData)

7. Merge with existing manual metadata
   ‚Üì
   metadata = { auto: {...}, manual: {...} }

8. Return merged metadata to frontend
   ‚Üì
   GET /api/projects ‚Üí ProjectInfo[] with metadata
```

### Migration from Legacy Metadata

**Script:** `backend/scripts/migrate-metadata.js`

**Purpose:** Migrate old metadata files (no auto/manual split) to v1.0 structure

```javascript
async function migrateMetadata(oldMetadataPath) {
  const oldMetadata = JSON.parse(await fs.readFile(oldMetadataPath, 'utf-8'));

  const newMetadata = {
    version: '1.0',
    id: oldMetadata.id,
    displayName: oldMetadata.displayName,

    // Empty auto section (will be filled on first scan)
    auto: {},

    // Move user data to manual section
    manual: {
      description: oldMetadata.description,
      client: oldMetadata.client,
      tags: oldMetadata.tags,
      status: oldMetadata.status,
      notes: oldMetadata.notes,
      color: oldMetadata.color
    },

    created: oldMetadata.created || new Date().toISOString(),
    modified: new Date().toISOString()
  };

  await fs.writeFile(oldMetadataPath, JSON.stringify(newMetadata, null, 2));
}
```

### Rules and Principles

**Auto Metadata:**
- ‚úÖ Source of truth: `.prt` file
- ‚úÖ Read-only in frontend
- ‚úÖ Updated automatically on file scan
- ‚úÖ Never manually edited by user

**Manual Metadata:**
- ‚úÖ Source of truth: `.metadata/{id}.json`
- ‚úÖ User-editable in frontend
- ‚úÖ Preserved during auto metadata updates
- ‚úÖ Created/updated via API

**Re-parsing .prt files:**
- When: File scanner runs (app startup, manual rescan)
- Result: Auto section updated, manual section preserved
- Safety: Explicit separation prevents accidental data loss

**Benefits:**
- ‚úÖ Automation: ~5 min/project √ó 50 projects = 4 hours/year saved
- ‚úÖ Accuracy: 100% accurate auto metadata (source of truth)
- ‚úÖ Smart filters: Dashboard filters work automatically
- ‚úÖ Data integrity: Manual data never lost during re-parse

**See Also:**
- [ADR 005: .prt Parser and Metadata Separation](decisions/005-prt-parser-metadata-separation.md)
- [PROJECT-METADATA-DASHBOARD-SPEC.md](../PROJECT-METADATA-DASHBOARD-SPEC.md)
- [docs/file-formats/prt-format.md](file-formats/prt-format.md)

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (–≠—Ç–∞–ø 7) ‚úÖ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ProjectPage

**Layout:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ProjectPage                                                ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  Project Info Card                                    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞, —Ç–∏–ø –¥–≤–∏–≥–∞—Ç–µ–ª—è, —Ü–∏–ª–∏–Ω–¥—Ä—ã         ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - Badge —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ä–∞—Å—á—ë—Ç–æ–≤                       ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ CalculationSel  ‚îÇ  ‚îÇ  Visualization Area              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚ñ° Calc 1 üî¥     ‚îÇ  ‚îÇ  ChartPreset1                    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚òë Calc 2 üü¢     ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚òë Calc 3 üîµ     ‚îÇ  ‚îÇ  ‚îÇ  Power & Torque Chart      ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚ñ° Calc 4 üü°     ‚îÇ  ‚îÇ  ‚îÇ  (Dual Y-axes)             ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚ñ° Calc 5 üü£     ‚îÇ  ‚îÇ  ‚îÇ                            ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ  ‚îÇ  Left Y: Power (kW)        ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Selected: 2/5   ‚îÇ  ‚îÇ  ‚îÇ  Right Y: Torque (N¬∑m)     ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ  ‚îÇ  X: RPM                    ‚îÇ ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ                            ‚îÇ ‚îÇ ‚îÇ
‚îÇ                        ‚îÇ  ‚îÇ  [DataZoom Slider]         ‚îÇ ‚îÇ ‚îÇ
‚îÇ                        ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ
‚îÇ                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Custom Hooks –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

**useProjectData.ts** - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞
```typescript
// –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ ID –∏–∑ API
- State management: project, loading, error
- Race condition handling (ignore flag –≤ useEffect)
- –§—É–Ω–∫—Ü–∏—è refetch –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
const { project, loading, error, refetch } = useProjectData(id);
```

**useSelectedCalculations.ts** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–±–æ—Ä–æ–º —Ä–∞—Å—á—ë—Ç–æ–≤
```typescript
// –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–º selectedIds (–º–∞–∫—Å–∏–º—É–º 5 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- toggleCalculation(id) - –¥–æ–±–∞–≤–∏—Ç—å/—É–±—Ä–∞—Ç—å —Ä–∞—Å—á—ë—Ç –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (MAX_CALCULATIONS = 5)
- –•–µ–ª–ø–µ—Ä—ã: isSelected, isMaxReached, canSelect, count, maxCount
- clearSelection() –¥–ª—è —Å–±—Ä–æ—Å–∞ –≤—ã–±–æ—Ä–∞

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
const {
  selectedIds,
  toggleCalculation,
  isMaxReached,
  count,
  maxCount
} = useSelectedCalculations();
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

**CalculationSelector.tsx** - UI –≤—ã–±–æ—Ä–∞ —Ä–∞—Å—á—ë—Ç–æ–≤
```typescript
// –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ä–∞—Å—á—ë—Ç–æ–≤ —Å checkboxes (Radix UI)
- –¶–≤–µ—Ç–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –≥—Ä–∞—Ñ–∏–∫–æ–º)
- Badge —Å —Å—á—ë—Ç—á–∏–∫–æ–º –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ä–∞—Å—á—ë—Ç–æ–≤ (2/5)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ checkboxes –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- Tooltip –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

// Props:
- calculations: Calculation[]       // –í—Å–µ —Ä–∞—Å—á—ë—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
- selectedIds: string[]              // –í—ã–±—Ä–∞–Ω–Ω—ã–µ ID —Ä–∞—Å—á—ë—Ç–æ–≤
- onToggle: (id: string) => void     // Callback –ø—Ä–∏ –∫–ª–∏–∫–µ
- isMaxReached: boolean              // –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏ –ª–∏–º–∏—Ç
- maxCount: number                   // –ú–∞–∫—Å–∏–º—É–º –≤—ã–±–æ—Ä–æ–≤ (5)

// –¶–≤–µ—Ç–∞ –∏–∑ config.yaml:
const CALCULATION_COLORS = [
  '#ff6b6b',  // –ö—Ä–∞—Å–Ω—ã–π
  '#4ecdc4',  // –ë–∏—Ä—é–∑–æ–≤—ã–π
  '#45b7d1',  // –°–∏–Ω–∏–π
  '#f9ca24',  // –ñ—ë–ª—Ç—ã–π
  '#a29bfe',  // –§–∏–æ–ª–µ—Ç–æ–≤—ã–π
];
```

**ChartPreset1.tsx** - –ì—Ä–∞—Ñ–∏–∫ "–ú–æ—â–Ω–æ—Å—Ç—å –∏ –º–æ–º–µ–Ω—Ç"
```typescript
// –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- Dual Y-axes chart (ECharts)
- –õ–µ–≤–∞—è –æ—Å—å: P-Av (–ú–æ—â–Ω–æ—Å—Ç—å –≤ –∫–í—Ç)
- –ü—Ä–∞–≤–∞—è –æ—Å—å: Torque (–ú–æ–º–µ–Ω—Ç –≤ –ù¬∑–º)
- –û—Å—å X: RPM (–û–±–æ—Ä–æ—Ç—ã –¥–≤–∏–≥–∞—Ç–µ–ª—è)
- DataZoom slider –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑—É–º–∏—Ä–æ–≤–∞–Ω–∏—è
- Tooltip —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º (—Ü–≤–µ—Ç + –µ–¥–∏–Ω–∏—Ü—ã)
- Legend –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å–µ—Ä–∏–π
- –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å CalculationSelector

// Props:
- calculations: Calculation[]       // –í—Å–µ —Ä–∞—Å—á—ë—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
- selectedIds: string[]             // –í—ã–±—Ä–∞–Ω–Ω—ã–µ ID –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

// –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- useMemo –¥–ª—è chartOption (–ø–µ—Ä–µ—Å—á—ë—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ selectedIds)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤ –ø–æ selectedIds
- –¶–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ (index % colors.length)

// –õ–∏–Ω–∏–∏:
- –ú–æ—â–Ω–æ—Å—Ç—å: —Å–ø–ª–æ—à–Ω–∞—è –ª–∏–Ω–∏—è (solid), –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ yAxisIndex: 0
- –ú–æ–º–µ–Ω—Ç: –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –ª–∏–Ω–∏—è (dashed), –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ yAxisIndex: 1
```

**chartConfig.ts** - –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ECharts
```typescript
// –≠–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π:
- getBaseChartConfig(): –±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤
  - grid (–æ—Ç—Å—Ç—É–ø—ã –¥–ª—è dual Y-axes)
  - tooltip (trigger: 'axis', custom formatter)
  - legend (position: top center)
  - dataZoom (slider + inside zoom)
  - animation: true

- createXAxis(name): —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Å–∏ X
  - type: 'value'
  - name: –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä "RPM")
  - nameLocation: 'middle'
  - axisLabel.formatter –¥–ª—è —Ç—ã—Å—è—á (1000 ‚Üí 1k)

- createYAxis(name, position, color): —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Å–∏ Y
  - type: 'value'
  - position: 'left' | 'right'
  - name: –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä "–ú–æ—â–Ω–æ—Å—Ç—å (–∫–í—Ç)")
  - nameTextStyle.color: —Ü–≤–µ—Ç –æ—Å–∏
  - splitLine: –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –ª–∏–Ω–∏—è —Å–µ—Ç–∫–∏

- getCalculationColor(index): –ø–æ–ª—É—á–∏—Ç—å —Ü–≤–µ—Ç –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞
  - –¶–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –∏–∑ CALCULATION_COLORS
  - index % 5 –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–∞—Å—á—ë—Ç–æ–≤

// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
const CALCULATION_COLORS: string[] = [...]  // 5 —Ü–≤–µ—Ç–æ–≤ –∏–∑ config.yaml
```

### Data Flow –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

```
User –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç /project/:id
         ‚Üì
ProjectPage.tsx —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è
         ‚Üì
useProjectData(id) –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
         ‚Üì
api.getProject(id) ‚Üí Backend
         ‚Üì
Backend –ø–∞—Ä—Å–∏—Ç .det —Ñ–∞–π–ª
         ‚Üì
Response: EngineProject JSON
         ‚Üì
project state –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
         ‚Üì
ProjectPage –ø–µ—Ä–µ–¥–∞—ë—Ç project.calculations –≤:
  - CalculationSelector (–¥–ª—è –≤—ã–±–æ—Ä–∞)
  - ChartPreset1 (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)
         ‚Üì
User –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–∞—Å—á—ë—Ç—ã —á–µ—Ä–µ–∑ checkboxes
         ‚Üì
toggleCalculation(id) –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
         ‚Üì
selectedIds state –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (useSelectedCalculations)
         ‚Üì
ChartPreset1 –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—ã–π selectedIds
         ‚Üì
useMemo –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç chartOption
         ‚Üì
ECharts re-renders —Å –Ω–æ–≤—ã–º–∏ —Å–µ—Ä–∏—è–º–∏
```

### ECharts –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**echarts-for-react:**
```typescript
import ReactECharts from 'echarts-for-react';

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
<ReactECharts
  option={chartOption}           // EChartsOption
  style={{ height: '600px' }}    // –†–∞–∑–º–µ—Ä –≥—Ä–∞—Ñ–∏–∫–∞
  opts={{ renderer: 'canvas' }}  // –ò–ª–∏ 'svg'
/>

// chartOption:
- –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è: EChartsOption –∏–∑ echarts
- –í–∫–ª—é—á–∞–µ—Ç: title, xAxis, yAxis[], series[], tooltip, legend, dataZoom
```

**Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
```typescript
// 1. useMemo –¥–ª—è chartOption
const chartOption = useMemo((): EChartsOption => {
  // –ü–µ—Ä–µ—Å—á—ë—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ selectedCalculations
}, [selectedCalculations]);

// 2. useMemo –¥–ª—è selectedCalculations
const selectedCalculations = useMemo(() => {
  return calculations.filter(calc => selectedIds.includes(calc.id));
}, [calculations, selectedIds]);

// 3. useCallback –¥–ª—è toggleCalculation
const toggleCalculation = useCallback((id: string) => {
  // –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏
}, []);
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ ProjectPage

```typescript
// Loading state
if (loading) {
  return <LoadingSpinner />;
}

// Error state
if (error) {
  return <ErrorMessage message={error} onRetry={refetch} />;
}

// Empty state (–ø—Ä–æ–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω)
if (!project) {
  return <div>–ü—Ä–æ–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω</div>;
}

// Success state - —Ä–µ–Ω–¥–µ—Ä UI
return (
  <ProjectPage with data />
);
```

### Technical Details

**Race condition handling –≤ useProjectData:**
```typescript
useEffect(() => {
  let ignore = false;  // –§–ª–∞–≥ –¥–ª—è –æ—Ç–º–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

  const fetchProject = async () => {
    const data = await projectsApi.getProject(projectId);
    if (!ignore) {  // –û–±–Ω–æ–≤–∏—Ç—å state —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –æ—Ç–º–µ–Ω–µ–Ω–æ
      setProject(data);
    }
  };

  fetchProject();

  return () => {
    ignore = true;  // Cleanup: –æ—Ç–º–µ–Ω–∏—Ç—å –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
  };
}, [projectId]);
```

**Checkbox component (Radix UI):**
```typescript
// –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
@radix-ui/react-checkbox

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: frontend/src/components/ui/checkbox.tsx
- ForwardRef –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ ref
- TailwindCSS —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è (border-primary, data-[state=checked]:bg-primary)
- Check icon –∏–∑ lucide-react
```

**API response format fix:**
```typescript
// Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
{
  success: true,
  data: { ...EngineProject },
  meta: { ... }
}

// Frontend –¥–æ–ª–∂–µ–Ω –∏–∑–≤–ª–µ—á—å:
if (response.data && response.data.success && response.data.data) {
  return response.data.data;
}
```

---

## Accessibility Implementation Patterns

**Status:** ‚úÖ Implemented (v2.0.0, WCAG 2.1 AA compliant)

### Keyboard Navigation

**Focus Management:**
```typescript
// All interactive elements are keyboard accessible
<button className="focus-visible:ring-[3px] focus-visible:ring-ring">
  {/* Prominent 3px focus indicator for buttons */}
</button>

<Card className="focus-visible:ring-2 focus-visible:ring-ring">
  {/* Subtle 2px focus indicator for cards */}
</Card>
```

**Focus Trap in Modals:**
- **Radix UI Dialog** provides built-in focus trap
- Focus moves to modal when opened
- ESC key closes modal
- Focus returns to trigger element on close

```typescript
import { Dialog, DialogContent } from '@/components/ui/dialog';

// Automatic focus management:
// - DialogContent traps focus inside modal
// - Tab cycles through focusable elements
// - Shift+Tab cycles backwards
// - ESC closes and returns focus
```

**Tab Order:**
1. Header navigation (logo, back button, settings)
2. Left panel (calculation selector, filters)
3. Main content (charts, tables)
4. Footer (if present)

### ARIA Labels and Semantic HTML

**Button Accessibility:**
```typescript
// Icon-only buttons must have aria-label
<button aria-label="Edit project metadata">
  <EditIcon />
</button>

// Text buttons don't need aria-label (text is readable)
<button>Save Changes</button>
```

**Form Accessibility:**
```typescript
// React Hook Form + Radix UI
<FormLabel htmlFor="projectName">Project Name</FormLabel>
<FormControl>
  <Input id="projectName" {...field} />
</FormControl>
<FormMessage /> {/* Error message linked automatically */}
```

**Dialog Accessibility:**
```typescript
<DialogTitle>Select Calculation</DialogTitle>
<DialogDescription>
  Choose up to 5 calculations to compare.
</DialogDescription>

// Automatic ARIA attributes:
// - aria-labelledby points to DialogTitle
// - aria-describedby points to DialogDescription
// - role="dialog"
// - aria-modal="true"
```

**Semantic HTML:**
- `<nav>` for navigation areas
- `<main>` for main content
- `<article>` for project cards
- `<section>` for chart sections
- `<button>` for interactive actions (never `<div>` with onClick)

### Screen Reader Support

**Descriptive Text:**
```typescript
// Status indicators for screen readers
<span className="sr-only">Loading project data</span>
<LoadingSpinner aria-hidden="true" />

// Hidden counts for screen readers
<Badge>
  <span className="sr-only">Selected calculations: </span>
  2/5
</Badge>
```

**Live Regions:**
```typescript
// Announce dynamic content changes
<div role="status" aria-live="polite">
  {successMessage && <p>{successMessage}</p>}
</div>

// Error announcements
<div role="alert" aria-live="assertive">
  {errorMessage && <p>{errorMessage}</p>}
</div>
```

### Color Contrast (WCAG 2.1 AA)

**Text Contrast:**
- Background: `#ffffff` (white)
- Primary text: `#09090b` (near black) - Contrast ratio: 20.2:1 ‚úÖ
- Secondary text: `#71717a` (gray) - Contrast ratio: 4.6:1 ‚úÖ
- Muted text: `#a1a1aa` (light gray) - Contrast ratio: 3.1:1 (large text only)

**Interactive Elements:**
- Primary buttons: High contrast (14:1+)
- Focus indicators: 3:1+ contrast
- Chart colors: All meet 3:1 contrast on white background

**Checked by:**
- TailwindCSS default palette (WCAG compliant)
- shadcn/ui theme (accessibility-first design)
- Manual verification with WebAIM Contrast Checker

### Touch Target Sizes

**Minimum touch targets: 44√ó44 px** (WCAG 2.1 AAA guideline)

```typescript
// All buttons meet minimum size
<Button className="h-10 px-4">  {/* 40px height, close to 44px */}
  Action
</Button>

// Cards have large clickable area
<ProjectCard className="min-h-[200px]">
  {/* Entire card is clickable */}
</ProjectCard>

// Checkboxes have extended hit area
<Checkbox className="h-4 w-4 data-[state=checked]:bg-primary">
  {/* Parent label extends hit area */}
</Checkbox>
```

### Accessibility Testing Checklist

**Keyboard:**
- ‚úÖ All features accessible via keyboard
- ‚úÖ Visible focus indicators
- ‚úÖ Logical tab order
- ‚úÖ No keyboard traps (except modals)

**Screen Reader:**
- ‚úÖ All images have alt text (or aria-label)
- ‚úÖ Form inputs have labels
- ‚úÖ Buttons have descriptive text or aria-label
- ‚úÖ Status changes announced

**Visual:**
- ‚úÖ Color contrast meets WCAG AA
- ‚úÖ Information not conveyed by color alone (line styles in charts)
- ‚úÖ Text resizable up to 200% without loss of content

**Motor:**
- ‚úÖ Touch targets ‚â•44√ó44px
- ‚úÖ No precise timing required
- ‚úÖ Gestures have keyboard alternatives

---

## Responsive Design Implementation

**Status:** ‚úÖ Implemented (v2.0.0, mobile-first approach)

### Breakpoints

**TailwindCSS breakpoints:**
```typescript
sm:  640px   // Small tablets portrait
md:  768px   // Tablets and small laptops
lg:  1024px  // Laptops
xl:  1280px  // Desktops
2xl: 1536px  // Large desktops
```

**Project uses:**
- `< 768px`: Mobile
- `768px - 1024px`: Tablet
- `> 1024px`: Desktop

### Component-Level Responsive Patterns

**Header (mobile optimization):**
```typescript
// Desktop: Full text buttons + calculation count
<Button>
  <ExportIcon /> Export to PNG
</Button>
<span>2 calculations selected</span>

// Mobile (<768px): Icon-only buttons, hidden count
<Button className="md:inline-flex md:gap-2">
  <ExportIcon />
  <span className="hidden md:inline">Export to PNG</span>
</Button>
<span className="hidden md:inline">2 calculations selected</span>
```

**Modals (mobile full-screen):**
```typescript
// Desktop: Centered modal with padding
<DialogContent className="max-w-lg">
  {/* Content */}
</DialogContent>

// Mobile: Nearly full-screen (inset-4 for small margin)
<DialogContent className="inset-4 max-w-lg md:inset-auto">
  {/* Content fills screen on mobile */}
</DialogContent>
```

**LeftPanel (hamburger menu):**
```typescript
// Mobile: Hidden by default, toggle button
<Sheet>
  <SheetTrigger>
    <MenuIcon />  {/* Hamburger */}
  </SheetTrigger>
  <SheetContent side="left">
    {/* Calculation selector, filters */}
  </SheetContent>
</Sheet>

// Desktop (>1024px): Always visible sidebar
<aside className="hidden lg:block">
  {/* Calculation selector, filters */}
</aside>
```

**PeakValuesCards (adaptive layout):**
```typescript
// Mobile: Stacked vertically
<div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
  <Card>Power: 115 kW</Card>
  <Card>Torque: 225 N¬∑m</Card>
  <Card>Peak Power RPM: 5500</Card>
  <Card>Peak Torque RPM: 3800</Card>
</div>

// Tablet: 2 columns
// Desktop: 4 columns inline
```

**Charts (responsive sizing):**
```typescript
// Height scales with viewport
<ReactECharts
  option={chartOption}
  style={{
    height: 'calc(100vh - 300px)',  // Adaptive height
    minHeight: '400px',             // Minimum on mobile
    width: '100%'                   // Full width always
  }}
/>

// ECharts grid margins adjust automatically
grid: {
  left: '10%',    // More space for Y-axis labels
  right: '10%',   // Space for right Y-axis
  top: '15%',     // Space for title
  bottom: '15%'   // Space for dataZoom
}
```

**DataTable (horizontal scroll on mobile):**
```typescript
// Mobile: Scrollable table
<div className="overflow-x-auto">
  <Table>
    {/* 73 parameters = wide table */}
  </Table>
</div>

// Desktop: Full width, no scroll needed
```

### Typography Scaling

**Headings:**
```typescript
// Mobile ‚Üí Desktop scaling
<h1 className="text-2xl md:text-3xl lg:text-4xl font-bold">
  Engine Results Viewer
</h1>

<h2 className="text-xl md:text-2xl font-semibold">
  Project Name
</h2>
```

**Body text:**
- Base: `text-sm` (14px)
- Desktop: `md:text-base` (16px)
- Large screens: No change (16px is readable)

### Spacing and Layout

**Container padding:**
```typescript
// Mobile: Smaller padding (save screen space)
<main className="p-4 md:p-6 lg:p-8">
  {/* Content */}
</main>
```

**Grid gaps:**
```typescript
// Tighter on mobile, comfortable on desktop
<div className="grid gap-4 md:gap-6 lg:gap-8">
  {/* Cards */}
</div>
```

### Images and Media

**Responsive images:**
```typescript
// Placeholder for future: Project thumbnails
<img
  src={thumbnail}
  alt="Project thumbnail"
  className="w-full h-auto object-cover"
  loading="lazy"
/>
```

### Performance Considerations

**Mobile:**
- Reduced animation duration (users expect faster)
- Lazy loading for off-screen content
- Smaller initial bundle (code splitting)

**Desktop:**
- Full animations enabled
- Preload hover states
- Larger cache for better performance

### Testing Matrix

**Devices tested:**
- ‚úÖ iPhone 13 Pro (390√ó844, iOS Safari)
- ‚úÖ iPad Air (820√ó1180, Safari)
- ‚úÖ MacBook Pro 14" (1512√ó982, Chrome)
- ‚úÖ Desktop 27" (2560√ó1440, Chrome)

**Browsers:**
- ‚úÖ Chrome 120+ (primary)
- ‚úÖ Safari 17+ (macOS, iOS)
- ‚úÖ Firefox 121+ (secondary)
- ‚ùå Edge (not tested, but likely works - Chromium-based)

---

## Data Processing Algorithms

**Status:** ‚úÖ Implemented (v2.0.0)

### RPM Step Calculator

**Purpose:** Display average RPM step instead of raw point count (more meaningful for users)

**Algorithm:**
```typescript
function calculateAverageStep(dataPoints: DataPoint[]): number {
  if (dataPoints.length < 2) return 0;

  // 1. Extract RPM values
  const rpms = dataPoints.map(point => point.RPM);

  // 2. Sort ascending (in case data is unsorted)
  rpms.sort((a, b) => a - b);

  // 3. Calculate steps between consecutive points
  const steps: number[] = [];
  for (let i = 1; i < rpms.length; i++) {
    steps.push(rpms[i] - rpms[i-1]);
  }

  // 4. Average the steps
  const avgStep = steps.reduce((sum, step) => sum + step, 0) / steps.length;

  // 5. Round to nearest 50 (50, 100, 150, 200, 250...)
  const roundedStep = Math.round(avgStep / 50) * 50;

  return roundedStep;
}
```

**Example:**
```
Input RPMs: [800, 900, 1000, 1100, 1250, 1400]
Steps: [100, 100, 100, 150, 150]
Average: 120
Rounded: 100 RPM step

Display: "RPM step: 100" (instead of "25 points")
```

**Why round to nearest 50?**
- Engine testing typically done in 50-200 RPM steps
- Rounding provides cleaner display
- Reflects real-world testing practices

---

### Peak Values Finder

**Purpose:** Find peak power, torque, and RPM at which peaks occur

**Algorithm:**
```typescript
function findPeakValues(dataPoints: DataPoint[]) {
  let maxPower = -Infinity;
  let maxTorque = -Infinity;
  let powerAtRPM = 0;
  let torqueAtRPM = 0;

  for (const point of dataPoints) {
    // Find max power
    if (point['P-Av'] > maxPower) {
      maxPower = point['P-Av'];
      powerAtRPM = point.RPM;
    }

    // Find max torque
    if (point.Torque > maxTorque) {
      maxTorque = point.Torque;
      torqueAtRPM = point.RPM;
    }
  }

  return {
    peakPower: { value: maxPower, rpm: powerAtRPM },
    peakTorque: { value: maxTorque, rpm: torqueAtRPM }
  };
}
```

**Display:**
```typescript
<Card>
  <CardTitle>Peak Power</CardTitle>
  <CardContent>
    <p className="text-3xl font-bold">{peakPower.value} kW</p>
    <p className="text-sm text-muted-foreground">
      at {peakPower.rpm} RPM
    </p>
  </CardContent>
</Card>
```

---

### Per-Cylinder Averaging

**Purpose:** Convert per-cylinder arrays to single averaged value for chart display

**Algorithm:**
```typescript
function averagePerCylinder(values: number[]): number {
  return values.reduce((sum, v) => sum + v, 0) / values.length;
}

// Example: PCylMax for 4-cylinder engine
const pcylMax = [120.5, 122.3, 119.8, 121.2]; // bar per cylinder
const avgPcylMax = averagePerCylinder(pcylMax); // 120.95 bar
```

**Which parameters use averaging?**
- `PCylMax` - Max cylinder pressure (per-cylinder ‚Üí averaged)
- `TCylMax` - Max cylinder temperature (per-cylinder ‚Üí averaged)
- `TUbMax` - Max exhaust temperature (per-cylinder ‚Üí averaged)
- `Deto` - Detonation degree (per-cylinder ‚Üí averaged)
- `MaxDeg` - Maximum detonation degree (per-cylinder ‚Üí averaged)

**Rationale:**
- Simplifies chart visualization (1 line instead of 4-6)
- Most users care about overall engine behavior
- Individual cylinder analysis = advanced feature (future enhancement)

---

### Color Assignment Algorithm

**Purpose:** Assign colors to calculations and parameters

**Algorithm 1: Calculation Colors (Comparison Mode)**
```typescript
// 5 colors cycling
const CALCULATION_COLORS = [
  '#e74c3c', // Red
  '#2ecc71', // Green
  '#3498db', // Blue
  '#f39c12', // Orange
  '#9b59b6'  // Purple
];

function getCalculationColor(index: number): string {
  return CALCULATION_COLORS[index % CALCULATION_COLORS.length];
}

// Assign to calculations
calculations.forEach((calc, index) => {
  calc.color = getCalculationColor(index);
});
```

**Algorithm 2: Parameter Colors (Single Calculation Mode)**
```typescript
// From config/parameters.ts
const PARAMETER_COLORS: Record<string, string> = {
  'P-Av': '#e74c3c',      // Red (power)
  'Torque': '#2ecc71',    // Green (torque)
  'PCylMax': '#3498db',   // Blue (pressure)
  'TCylMax': '#f39c12',   // Orange (temperature)
  // ... 73 parameters total
};

function getParameterColor(paramName: string): string {
  return PARAMETER_COLORS[paramName] || '#71717a'; // Gray fallback
}
```

**When to use which?**
- **Single calculation:** Use PARAMETER_COLORS (distinguish P-Av vs Torque)
- **Comparison mode:** Use CALCULATION_COLORS (distinguish Vesta vs Camry)

See: [ADR 003: Color Palette Engineering Style](decisions/003-color-palette-engineering-style.md)

---

### Units Conversion Algorithms

**Purpose:** Convert between SI, American, and HP unit systems

**Power Conversion:**
```typescript
function convertPower(kW: number, targetUnits: Units): number {
  switch (targetUnits) {
    case 'SI':
      return kW; // Already in kW
    case 'American':
      return kW * 1.341; // kW ‚Üí bhp (brake horsepower)
    case 'HP':
      return kW * 1.36;  // kW ‚Üí PS (metric horsepower)
  }
}
```

**Torque Conversion:**
```typescript
function convertTorque(Nm: number, targetUnits: Units): number {
  switch (targetUnits) {
    case 'SI':
      return Nm; // Already in N¬∑m
    case 'American':
      return Nm * 0.7376; // N¬∑m ‚Üí lb-ft
    case 'HP':
      return Nm; // PS system uses N¬∑m for torque
  }
}
```

**Pressure Conversion:**
```typescript
function convertPressure(bar: number, targetUnits: Units): number {
  switch (targetUnits) {
    case 'SI':
    case 'HP':
      return bar; // bar used in both
    case 'American':
      return bar * 14.504; // bar ‚Üí psi
  }
}
```

**Temperature Conversion:**
```typescript
function convertTemperature(celsius: number, targetUnits: Units): number {
  switch (targetUnits) {
    case 'SI':
    case 'HP':
      return celsius; // ¬∞C used in both
    case 'American':
      return (celsius * 9/5) + 32; // ¬∞C ‚Üí ¬∞F
  }
}
```

**Conversion Sources:**
- **1 kW = 1.341 bhp:** SAE J1349 standard (brake horsepower)
- **1 kW = 1.36 PS:** DIN 70020 standard (metric horsepower)
- **1 N¬∑m = 0.7376 lb-ft:** Physics constant
- **1 bar = 14.504 psi:** Physics constant

---

## Parameter Configuration System

**Status:** ‚úÖ Implemented (v2.0.0, 73 parameters supported)

### Single Source of Truth: parameters.ts

**File:** `frontend/src/config/parameters.ts`

**Purpose:**
- Central registry for all 73 engine parameters
- Parameter metadata (display name, unit, color, category)
- Used by parsers, charts, tables, export

**Structure:**
```typescript
export interface ParameterConfig {
  name: string;           // Display name (e.g., "P-Av")
  fullName: string;       // Full name (e.g., "Average Power")
  unit: string;           // SI unit (e.g., "kW")
  unitAmerican?: string;  // American unit (e.g., "bhp")
  unitHP?: string;        // HP system unit (e.g., "PS")
  color: string;          // Chart color (e.g., "#e74c3c")
  category: ParameterCategory;
  description: string;    // Engineering description
  isPerCylinder: boolean; // Array or scalar value
}

export const PARAMETERS: Record<string, ParameterConfig> = {
  'RPM': { ... },
  'P-Av': { ... },
  'Torque': { ... },
  // ... 73 parameters total
};
```

### Parameter Categories

```typescript
type ParameterCategory =
  | 'performance'   // Power, Torque
  | 'pressure'      // PCylMax, BMEP, IMEP, FMEP, PMEP
  | 'temperature'   // TCylMax, TUbMax
  | 'efficiency'    // PurCyl, LamAv
  | 'combustion'    // MaxDeg, Deto, Convergence
  | 'flow'          // Mass flow rates
  | 'other';        // Miscellaneous
```

**Usage in UI:**
```typescript
// Custom parameter selector (ChartPreset6)
<Tabs>
  <TabsList>
    <TabsTrigger value="performance">Performance</TabsTrigger>
    <TabsTrigger value="pressure">Pressure</TabsTrigger>
    <TabsTrigger value="temperature">Temperature</TabsTrigger>
    {/* ... */}
  </TabsList>

  <TabsContent value="performance">
    {/* Show only performance parameters */}
  </TabsContent>
</Tabs>
```

### Parameter Mapping Strategy

**Problem:** Different file formats use different names for same parameter

**Example:**
- `.det` file: `Purc` (short name)
- `.pou` file: `PurCyl` (full name)
- Both represent: Cylinder Charge Purity

**Solution: Canonical names in PARAMETERS**
```typescript
export const PARAMETERS = {
  'PurCyl': {
    name: 'PurCyl',
    aliases: ['Purc'],  // Alternative names
    // ...
  }
};

// Parser uses mapping:
function mapParameterName(rawName: string): string {
  // Search for parameter with this alias
  for (const [canonical, config] of Object.entries(PARAMETERS)) {
    if (config.aliases?.includes(rawName)) {
      return canonical;
    }
  }
  return rawName; // No mapping found, use as-is
}
```

### Integration with Parsers

**DET Parser:**
```typescript
// Parse column headers
const headers = line2.split(/\s+/).slice(1); // Skip service column

// Map to canonical names
const parameters = headers.map(mapParameterName);

// Validate against PARAMETERS config
parameters.forEach(param => {
  if (!PARAMETERS[param]) {
    console.warn(`Unknown parameter: ${param}`);
  }
});
```

**POU Parser:** Same pattern

### Integration with Charts

**Example: ChartPreset1.tsx**
```typescript
import { PARAMETERS } from '@/config/parameters';

// Get parameter config
const powerConfig = PARAMETERS['P-Av'];
const torqueConfig = PARAMETERS['Torque'];

// Use in chart
yAxis: [
  {
    name: `${powerConfig.name} (${powerConfig.unit})`,
    nameTextStyle: { color: powerConfig.color }
  },
  {
    name: `${torqueConfig.name} (${torqueConfig.unit})`,
    nameTextStyle: { color: torqueConfig.color }
  }
]
```

### Integration with Units Conversion

```typescript
// Get unit based on user settings
function getUnit(param: string, units: Units): string {
  const config = PARAMETERS[param];

  switch (units) {
    case 'SI':
      return config.unit;
    case 'American':
      return config.unitAmerican || config.unit;
    case 'HP':
      return config.unitHP || config.unit;
  }
}

// Update axis label dynamically
yAxis: {
  name: `${config.name} (${getUnit('P-Av', currentUnits)})`
}
// Result: "P-Av (kW)" ‚Üí "P-Av (bhp)" ‚Üí "P-Av (PS)"
```

### 73 Parameters Breakdown

**From .det (24 parameters):**
- RPM, P-Av, Torque, BMEP, IMEP, FMEP, PMEP
- PCylMax, TCylMax, TUbMax (per-cylinder arrays)
- PurCyl, LamAv, MaxDeg, Deto (per-cylinder arrays)
- ... (see [PARAMETERS-REFERENCE.md](PARAMETERS-REFERENCE.md))

**From .pou (71 parameters):**
- All .det parameters +
- Detailed combustion parameters
- Mass flow rates
- Heat transfer coefficients
- Emissions estimates
- ... (see [PARAMETERS-REFERENCE.md](PARAMETERS-REFERENCE.md))

**Merged format (.pou-merged):**
- 75 parameters total (71 from .pou + 4 critical from .det)
- Critical .det params: P-Av, Torque, BMEP, RPM
- Why? .pou may have slightly different values due to calculation method

---

## Chart Implementation Patterns

**Status:** ‚úÖ Implemented (v2.0.0, 6 presets)

See detailed documentation: **[docs/chart-presets.md](chart-presets.md)**

### Quick Reference

**Dual Y-Axis Pattern:**
- Used when parameters have different units or scales
- Examples: Power (kW) vs Torque (N¬∑m), Pressure (bar) vs Temperature (¬∞C)
- Left axis: Primary parameter, Right axis: Secondary parameter

**Line Style Conventions:**
- Solid: Primary/most important parameter
- Dashed: Secondary parameter
- Dotted: Tertiary parameter
- Purpose: Distinguishability beyond color (accessibility, print)

**Color Systems:**
- **Single calculation:** PARAMETER_COLORS (distinguish P-Av vs Torque)
- **Comparison mode:** CALCULATION_COLORS (distinguish Calc1 vs Calc2)
- See: [ADR 003: Color Palette Engineering Style](decisions/003-color-palette-engineering-style.md)

**Axis Label Format:**
- Pattern: `{ParameterName} ({Unit})`
- Examples: `P-Av (kW)`, `Torque (N¬∑m)`, `PCylMax (bar)`
- **CRITICAL:** Always use original English parameter names (never translate)

**Legend Format:**
- Pattern: `{CalculationName} - {ParameterName}`
- Example: `Vesta 1.6 IM - P-Av`
- No units in legend (only on axes)

**Per-Cylinder Handling:**
- Parameters like PCylMax, TCylMax are arrays
- Chart displays averaged value: `average(cylinder1, cylinder2, ...)`
- Simplifies visualization (1 line instead of 4-6)

**6 Chart Presets:**
1. **Power & Torque** - Most important (P-Av, Torque, dual Y-axis)
2. **Pressure & Temperature** - Durability analysis (PCylMax, TCylMax, TUbMax)
3. **MEP** - Efficiency analysis (FMEP, IMEP, BMEP, PMEP)
4. **Critical Values** - Safety analysis (PCylMax, MaxDeg) ‚ö†Ô∏è
5. **Volumetric Efficiency** - Breathing analysis (PurCyl, LamAv)
6. **Custom** - User-defined parameters (modal selector)

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

### –ü–æ—á–µ–º—É Node.js + Express (Backend)?

**–ü–ª—é—Å—ã:**
- ‚úÖ JavaScript –Ω–∞ frontend –∏ backend (–æ–¥–∏–Ω —è–∑—ã–∫)
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Express
- ‚úÖ –õ–µ–≥–∫–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å JSON
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- Python + FastAPI: –±–æ–ª—å—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è data science, –Ω–æ –Ω–µ –Ω—É–∂–µ–Ω –∑–¥–µ—Å—å
- Python + Flask: —Å—Ç–∞—Ä—ã–π —Å—Ç–µ–∫

### –ü–æ—á–µ–º—É React 18 + TypeScript (Frontend)?

**–ü–ª—é—Å—ã:**
- ‚úÖ React - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π
- ‚úÖ TypeScript - type safety, –º–µ–Ω—å—à–µ –±–∞–≥–æ–≤
- ‚úÖ Hooks - —á–∏—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
- ‚úÖ –ë–æ–ª—å—à–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- Vue: –º–µ–Ω—å—à–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è charts
- Angular: —Å–ª–∏—à–∫–æ–º —Ç—è–∂—ë–ª—ã–π –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### –ü–æ—á–µ–º—É ECharts?

**–ü–ª—é—Å—ã:**
- ‚úÖ –ú–æ—â–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" (zoom, pan, tooltip)
- ‚úÖ –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –•–æ—Ä–æ—à–∞—è React –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (echarts-for-react)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- Recharts: –ø—Ä–æ—â–µ, –Ω–æ –º–µ–Ω–µ–µ –º–æ—â–Ω—ã–π
- Chart.js: –º–µ–Ω—å—à–µ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤
- D3.js: —Å–ª–∏—à–∫–æ–º low-level, –¥–æ–ª–≥–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ü–æ—á–µ–º—É Vite?

**–ü–ª—é—Å—ã:**
- ‚úÖ –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π (HMR –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π bundler (ESM)
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è DX (developer experience)
- ‚úÖ TypeScript "–∏–∑ –∫–æ—Ä–æ–±–∫–∏"

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- Webpack: –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —Å–ª–æ–∂–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- Create React App: —É—Å—Ç–∞—Ä–µ–ª

### –ü–æ—á–µ–º—É TailwindCSS?

**–ü–ª—é—Å—ã:**
- ‚úÖ Utility-first –ø–æ–¥—Ö–æ–¥ - –±—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ CSS
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –ª–µ–≥–∫–æ

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- CSS Modules: –±–æ–ª—å—à–µ —Ñ–∞–π–ª–æ–≤, –º–µ–¥–ª–µ–Ω–Ω–µ–µ
- Styled Components: runtime overhead

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Backend
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω (—Ç–æ–ª—å–∫–æ localhost:5173 –≤ dev)
- ‚úÖ JSON parsing –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ä–∞–∑–º–µ—Ä–æ–º
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π —Ñ–∞–π–ª–æ–≤ (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ path traversal)
- ‚úÖ Error handling (–Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å stack traces –≤ production)

### Frontend
- ‚úÖ TypeScript strict mode (type safety)
- ‚úÖ Sanitize –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ (–µ—Å–ª–∏ –±—É–¥–µ—Ç)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ API –æ—Ç–≤–µ—Ç–æ–≤

---

## –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** 10-100 –ø—Ä–æ–µ–∫—Ç–æ–≤, —Ñ–∞–π–ª—ã –¥–æ 10 MB
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏ (fileParser –¥–µ—Ä–∂–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç)

### –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –≤—ã—Ä–∞—Å—Ç–µ—Ç:
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite –∏–ª–∏ PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **Background jobs:** Bull –∏–ª–∏ –¥—Ä—É–≥–∞—è –æ—á–µ—Ä–µ–¥—å –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- **API pagination:** Limit/offset –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤

---

## TypeScript —Ç–∏–ø—ã (shared-types.ts)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–≤–µ—Ä—Å–∏—è 0.2.0)

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ

–§–∞–π–ª **[shared-types.ts](../shared-types.ts)** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –æ–±—â–∏–µ —Ç–∏–ø—ã –¥–ª—è backend –∏ frontend.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∏–ø–æ–≤

**Core Types (–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö):**
```typescript
EngineMetadata      // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–≤–∏–≥–∞—Ç–µ–ª—è (—Ü–∏–ª–∏–Ω–¥—Ä—ã, —Ç–∏–ø)
DataPoint           // –û–¥–Ω–∞ —Ç–æ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö (RPM + 23 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞)
Calculation         // –û–¥–∏–Ω —Ä–∞—Å—á—ë—Ç (–º–∞—Ä–∫–µ—Ä + –º–∞—Å—Å–∏–≤ —Ç–æ—á–µ–∫)
ProjectData         // –ü–æ–ª–Ω—ã–π –ø—Ä–æ–µ–∫—Ç (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ + —Ä–∞—Å—á—ë—Ç—ã)
ProjectInfo         // –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Å–ø–∏—Å–∫–∞
```

**API Types (–¢–∏–ø—ã –¥–ª—è REST API):**
```typescript
GetProjectsResponse    // –û—Ç–≤–µ—Ç: —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
GetProjectResponse     // –û—Ç–≤–µ—Ç: –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞
ErrorResponse          // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞
```

**Chart Types (–¢–∏–ø—ã –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤):**
```typescript
ChartParameter         // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
ChartPreset            // –ü—Ä–µ—Å–µ—Ç—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤ (preset1-4, custom)
ChartPresetConfig      // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–µ—Å–µ—Ç–∞
SelectedCalculations   // –í—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–∞—Å—á—ë—Ç—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
```

**Export Types (–¢–∏–ø—ã –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞):**
```typescript
ChartExportFormat      // PNG, SVG, JPG
DataExportFormat       // CSV, Excel, JSON
ChartExportOptions     // –û–ø—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤
DataExportOptions      // –û–ø—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**Backend (JavaScript/Node.js):**
```javascript
// Backend –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JSDoc –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
/**
 * @typedef {import('../shared-types').ProjectData} ProjectData
 */

/**
 * @param {string} filePath
 * @returns {Promise<ProjectData>}
 */
async function parseDetFile(filePath) {
  // ...
}
```

**Frontend (TypeScript/React):**
```typescript
import type {
  ProjectData,
  Calculation,
  ChartPreset
} from '../shared-types';

// –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤

**–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –†–ï–ê–õ–¨–ù–´–• –¥–∞–Ω–Ω—ã—Ö:**
- –ê–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–∞ `test-data/Vesta 1.6 IM.det` (462 —Å—Ç—Ä–æ–∫–∏, 17 —Ä–∞—Å—á—ë—Ç–æ–≤)
- 24 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (RPM, P-Av, Torque, –º–∞—Å—Å–∏–≤—ã –ø–æ —Ü–∏–ª–∏–Ω–¥—Ä–∞–º)
- **–í–ê–ñ–ù–û:** –£—á—Ç–µ–Ω–æ —á—Ç–æ –ø–µ—Ä–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ —Å–ª—É–∂–µ–±–Ω–∞—è

**–ú–∞—Å—Å–∏–≤—ã –¥–ª—è —Ü–∏–ª–∏–Ω–¥—Ä–æ–≤:**
```typescript
interface DataPoint {
  // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —Ü–∏–ª–∏–Ω–¥—Ä–∞–º (–≤—Å–µ–≥–¥–∞ 4 –∑–Ω–∞—á–µ–Ω–∏—è)
  PurCyl: [number, number, number, number];
  TUbMax: [number, number, number, number];
  TCylMax: [number, number, number, number];
  PCylMax: [number, number, number, number];
  Deto: [number, number, number, number];
}
```

**–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è:**
```typescript
// –¢–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã –¥–≤–∏–≥–∞—Ç–µ–ª—è
type EngineType = 'NATUR' | 'TURBO' | 'SUPERCHARGED';

// –¢–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
type ChartParameter = 'RPM' | 'PAv' | 'Torque' | ...;
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ–±—â–∏—Ö —Ç–∏–ø–æ–≤

1. **Single Source of Truth** - —Ç–∏–ø—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
2. **Sync –º–µ–∂–¥—É backend/frontend** - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
3. **Type safety** - –æ—à–∏–±–∫–∏ –≤—ã—è–≤–ª—è—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
4. **Autocomplete** - IDE –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–ª—è
5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - —Ç–∏–ø—ã = –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö:
1. –û–±–Ω–æ–≤–∏ `shared-types.ts`
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ backend –∏ frontend –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è
3. –û–±–Ω–æ–≤–∏ —ç—Ç—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
4. –û–±–Ω–æ–≤–∏ `docs/api.md` —Å –Ω–æ–≤—ã–º–∏ —Ç–∏–ø–∞–º–∏

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
1. –ò–∑—É—á–∏ [shared-types.ts](../shared-types.ts) - –≤—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
2. –ò–∑—É—á–∏ [docs/api.md](api.md) - API endpoints
3. –û—Ç–∫—Ä–æ–π [roadmap.md](../roadmap.md) - –Ω–∞—á–Ω–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
4. –°–ª–µ–¥—É–π –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∫–æ–¥–∞

---

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏ üèóÔ∏è**
